<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Nom Complet
                <div class="button" (click)="onTrierParNomComplet()"> TRIER @if (triAscendantNom) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Nom
                <div class="button" (click)="onTrierParNom()"> TRIER @if (triAscendantNom) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Particule
                <div class="button" (click)="onTrierParParticule()"> TRIER @if (triAscendantNom) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Prénom
                <div class="button" (click)="onTrierParPrenom()"> TRIER @if (triAscendantNom) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th> 
            <th>Age
                <div class="button" (click)="onTrierParAge()"> TRIER @if (triAscendantAge) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Équipage
                <div class="button" (click)="onTrierParEquipage()"> TRIER @if (triAscendantEquipage) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Status
                <div class="button" (click)="onTrierParStatus()"> TRIER @if (triAscendantStatus) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Prime
                <div class="button" (click)="onTrierParPrime()"> TRIER @if (triAscendantPrime) {
                    <span>⬇</span>
                    } @else {
                    <span>⬆</span>
                    }
                </div>
            </th>
            <th>Détails</th>
        </tr>
    </thead>
    @if (isLoading) {
    <th colspan="10" class="container-spin">
        <div class="spinner"></div>
        <tr colspan="10">Chargement des personnages...</tr>
    </th>
    }
    <tbody>
        @for (personnage of persoList; track personnage.id){

        <tr>
            <td>{{personnage.id}} </td>
            <td>{{personnage.nom_complet}} </td>
            <td>{{personnage.nom}} </td>
            <td>{{personnage.particule}}</td>
            <td>{{personnage.prenom}} </td>
            <td>@if (personnage.age) { {{personnage.age}} } @else { age inconnu } </td>
            <td>@if (personnage.crew) {
                @if (personnage.crew.name == "Armarda du Chapeau de Paille") {
                Armada du Chapeau de Paille
                }
                @else {
                {{personnage.crew.name}}
                }
                } </td>
            <td>@if (personnage.status) { {{personnage.status}} } @else { ---- } </td>
            <td>@if (personnage.bounty) { {{personnage.bounty}} } @else { ---- } </td>
            <td><button (click)="onViewFichePerso(personnage)">Détails</button></td>
        </tr>
        }
    </tbody>
</table>

<div class="liste">
 @for (personnage of persoList; track personnage.id){
   <li> new PersonnageMock( {{personnage.id}},<br/>
    '{{personnage.prenom}}','{{personnage.nom}}','{{personnage.surnom}}',<br/>
    "{{personnage.bounty}}",<br/>
    ["{{personnage.crew.name}}"]<br/>
   )@if (personnage.particule) {.withParticule("D.")},
    </li>

 }

</div>

